import{s as $,r as w,x as C,y as v,c as x,a as o,g as S,t as c,p as l,o as h}from"./DedCoyFO.js";const k={key:0,class:"my-2 p-2 bg-red-100 text-red-700 rounded"},B={__name:"teste",setup(M){const{auth:n,agenda:a}=$(),s=w(""),y=e=>e>0?[e/3600,e%3600/60,e%60].map(t=>String(Math.floor(t)).padStart(2,"0")).join(":"):"00:00:00",_=async()=>{s.value="";try{await n.signIn()}catch(e){s.value="Erro ao entrar: "+((e==null?void 0:e.message)||e)}},b=async()=>{s.value="";try{await n.signOut()}catch(e){s.value="Erro ao sair: "+((e==null?void 0:e.message)||e)}},E=async()=>{var t,u,i,g;s.value="";const{$toast:e}=v();try{await e.promise(a.fetchGoogleEvents(["47cafc18f2792c5710809aae573052af940ed0b8d6a65dc2527f2c0063460c6a@group.calendar.google.com"],{timeMin:a.filters.start,timeMax:a.filters.end}),{pending:"Carregando eventos...",success:"Eventos carregados com sucesso!",error:{render({data:r}){var p,d,m,f;return`Erro (${((d=(p=r==null?void 0:r.result)==null?void 0:p.error)==null?void 0:d.code)||""}) ao carregar eventos: ${((f=(m=r==null?void 0:r.result)==null?void 0:m.error)==null?void 0:f.message)||(r==null?void 0:r.message)||r}`}}})}catch(r){s.value=`Erro (${(u=(t=r.result)==null?void 0:t.error)==null?void 0:u.code}) ao carregar eventos: ${(g=(i=r.result)==null?void 0:i.error)==null?void 0:g.message}`}};return C(()=>{const{$toast:e}=v();e.success("Agenda inicializada com sucesso!",{duration:500,position:"top-right"})}),(e,t)=>(h(),x("div",null,[o("button",{class:"px-4 py-2 bg-blue-600 text-white rounded flex items-center",onClick:_}," Entrar com Google "),o("button",{class:"px-4 py-2 bg-red-600 text-white rounded flex items-center",onClick:b}," Sair "+c(y(l(n).user.expires_countdown)),1),o("button",{class:"px-4 py-2 bg-blue-600 text-white rounded flex items-center",onClick:E}," Carregar eventos "),s.value?(h(),x("div",k,c(s.value),1)):S("",!0),o("pre",null,c(l(a).$state),1),o("pre",null,c(l(n).$state),1)]))}};export{B as default};

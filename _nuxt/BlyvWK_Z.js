import{_ as $,H as q,k as w,s as R,r as g,I as k,V as x,D as _,c as r,o as i,a as t,h as d,g as p,v as f,J as j,F,j as V,t as c,p as u,K as T,e as A}from"./B0Zal7o-.js";const E={class:"content"},I={class:"form-inline"},M={class:"form-group"},N={class:"row"},O={class:"form-group"},S={class:"row"},z={class:"form-group"},H={class:"row"},J=["value"],K={class:"form-group"},P={class:"flex gap-xs"},W={class:"form-group"},G={class:"flex gap-xs"},Q={class:"form-group",style:{"align-items":"flex-start"}},X=["id","value"],Y=["for"],Z={class:"form-group",style:{"text-align":"right"}},h=["disabled"],ee={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},te={__name:"filters-lista",setup(le){const C=q(),L=w(),{lista:n}=R(),b=g(!1),l=g({search:"",title:"",locale:"",date:"",start:n.filters.start,end:n.filters.end,calendars:[]}),D=()=>{const o=C.query||{};["search","title","locale","date","start","end"].forEach(s=>{o[s]!==void 0&&(l.value[s]=o[s])}),o.calendars&&(l.value.calendars=Array.isArray(o.calendars)?o.calendars:o.calendars.split(",").filter(Boolean))},U=k(()=>{const o=Object.fromEntries(Object.entries(l.value).filter(([e,s])=>e==="calendars"?s.length:s!==""&&s!=null).map(([e,s])=>Array.isArray(s)?[e,s.join(",")]:[e,s]));L.replace({query:o})},200),m=k(()=>{U();const{today:o,future:e}=x();n.filters={...n.filters,...l.value,start:l.value.start||o,end:l.value.end||e},n.updateFetchFilters()},1e3);_(l,()=>{m()},{deep:!0});function v(o){if(o==="calendars")l.value.calendars=[];else if(o==="date"){l.value.date="";const{today:e,future:s}=x();l.value.start=e,l.value.end=s}else l.value[o]=""}return D(),m(),(o,e)=>{var s,y;return i(),r("div",E,[t("div",I,[t("div",null,[t("div",M,[e[13]||(e[13]=t("label",{for:"search"},"Pesquisar",-1)),t("div",N,[d(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.search=a),type:"text",placeholder:"Buscar itens..."},null,512),[[f,l.value.search]]),l.value.search?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:e[1]||(e[1]=a=>v("search"))}," × ")):p("",!0)])]),t("div",O,[e[14]||(e[14]=t("label",{for:"title"},"Título",-1)),t("div",S,[d(t("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),type:"text",placeholder:"Filtrar por título..."},null,512),[[f,l.value.title]]),l.value.title?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:e[3]||(e[3]=a=>v("title"))}," × ")):p("",!0)])]),t("div",z,[e[16]||(e[16]=t("label",{for:"locale"},"Local",-1)),t("div",H,[d(t("select",{id:"locale","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.locale=a)},[e[15]||(e[15]=t("option",{value:""},"Todos os locais",-1)),(i(!0),r(F,null,V(u(n).eventsLocales,a=>(i(),r("option",{key:a,value:a},c(a),9,J))),128))],512),[[j,l.value.locale]]),l.value.locale?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:e[5]||(e[5]=a=>v("locale"))}," × ")):p("",!0)])]),t("div",K,[e[17]||(e[17]=t("label",{for:"date"},"Data",-1)),t("div",P,[d(t("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.date=a),type:"date"},null,512),[[f,l.value.date]]),l.value.date?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:e[7]||(e[7]=a=>v("date"))}," × ")):p("",!0)])]),t("div",W,[e[18]||(e[18]=t("label",null,"Intervalo de Datas",-1)),t("div",G,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.start=a),type:"date"},null,512),[[f,l.value.start]]),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.end=a),type:"date"},null,512),[[f,l.value.end]])]),l.value.start||l.value.end?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:e[10]||(e[10]=a=>v("date"))}," × ")):p("",!0)])]),t("div",null,[t("div",Q,[e[19]||(e[19]=t("label",null,"Agendas",-1)),t("div",null,[(i(!0),r(F,null,V(u(n).eventsCalendars,a=>(i(),r("div",{key:a},[d(t("input",{id:"cat-"+a,"onUpdate:modelValue":e[11]||(e[11]=B=>l.value.calendars=B),type:"checkbox",value:a,style:{margin:"5px 5px 0 0"}},null,8,X),[[T,l.value.calendars]]),t("label",{for:"cat-"+a,style:{"margin-bottom":"0"}},c(a),9,Y)]))),128))])]),t("div",Z,[e[20]||(e[20]=t("label",null,null,-1)),t("button",{class:"success",disabled:b.value||u(n).loading,onClick:e[12]||(e[12]=a=>u(m)())},c(b.value||u(n).loading?"Atualizando...":"Aplicar"),9,h)])])]),t("div",ee,[t("span",null,[e[21]||(e[21]=t("i",{class:"la la-calendar-check"},null,-1)),A(" "+c(((y=(s=u(n))==null?void 0:s.calendars)==null?void 0:y.length)||0),1)]),t("span",null,[e[22]||(e[22]=t("i",{class:"la la-tasks"},null,-1)),A(" "+c(Array.isArray(u(n).eventsFiltered)?u(n).eventsFiltered.length:0),1)])])])}}},se=$(te,[["__scopeId","data-v-95e3424d"]]);export{se as F};

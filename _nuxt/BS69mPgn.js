import{L as ie}from"./CqrywqVe.js";import{_ as re,s as ue,r as D,f as Z,D as ee,z as de,x as ce,Q as ve,c as o,C as te,p as r,F as E,a as t,g as v,n as _,t as c,h as S,A as $,b as pe,e as L,j as V,o as a,l as se,P as fe}from"./DedCoyFO.js";import{F as _e}from"./jRjVJycn.js";import{a as be,S as ge,E as me}from"./B4GR9zTN.js";const ye={class:"tabs-container print-hide"},he={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},ke=["aria-selected"],De={class:"badge"},Ce=["aria-selected"],Te=["aria-selected"],Ee={class:"tab-content"},Se={id:"tab-content-lista",role:"tabpanel"},$e={class:"text-center"},Le={key:0},Ve={key:1},je={key:2},Be={key:3},Ge={key:4},we={id:"tab-content-filters",role:"tabpanel"},xe={id:"tab-content-print",role:"tabpanel"},Ae={style:{"margin-top":"10px"},class:"a4"},Ie={class:"settings-list"},Oe=["onDragstart","onDragover","onDrop"],Fe=["onClick"],Ne={key:0,class:"print-page"},ze=["onDragstart","onDragover","onDrop"],Me={colspan:"5"},Pe={class:"flex items-center aling-center justify-center"},qe=["onClick"],He={key:0},We={key:0},Ke={key:0},Qe=["innerHTML"],Re={__name:"index",setup(Ue){const{lista:l}=ue(),u=D("lista"),j=s=>{var e;return(e=s==null?void 0:s.replace(/-$/,""))==null?void 0:e.trim()},le=s=>{if(!s)return 0;let e=0;return s.search&&e++,s.title&&e++,s.locale&&e++,s.date&&e++,s.calendars&&s.calendars.length>0&&e++,e},ae=()=>{u.value="lista",setTimeout(()=>{window.print(),u.value="print"},500)},ne=Z(()=>le(l.filters)),d=D([]);ee(()=>l.groupedEventsByTitle,()=>{var s,e,g,h,k;if(((e=(s=l.filters)==null?void 0:s.calendars)==null?void 0:e.length)>0||(g=l.filters)!=null&&g.locale||(h=l.filters)!=null&&h.date||(k=l.filters)!=null&&k.search){if(!l.groupedEventsByTitle){d.value=[];return}d.value=Object.entries(l.groupedEventsByTitle).map(([C,T])=>({title:C,items:T}))}else return d.value=[]},{immediate:!0,deep:!0});const b=D(null),m=D(null),B=s=>{b.value=s},G=s=>{m.value=s},w=s=>{if(b.value===null||b.value===s){b.value=null,m.value=null;return}const e=d.value.slice(),[g]=e.splice(b.value,1);e.splice(s,0,g),d.value=e,b.value=null,m.value=null},f=de({});ee(d,()=>{d.value&&d.value.forEach(s=>{s.title in f||(f[s.title]=!0)})},{immediate:!0});const x=s=>{u.value="print",f[s]=!f[s]},A=Z(()=>d.value.length>0&&d.value.every(s=>f[s.title])),oe=s=>{d.value.forEach(e=>{f[e.title]=s})},y=D(null);return ce(()=>{y.value=new be({extensions:[ge],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),ve(()=>{y.value&&y.value.destroy()}),(s,e)=>{var h,k,C,T,I,O,F,N,z,M,P,q,H,W,K,Q,R,U,J,X,Y;const g=ie;return a(),o("div",null,[r(l).loading?(a(),te(g,{key:0})):(a(),o(E,{key:1},[t("div",ye,[t("nav",he,[t("span",{id:"tab-filters","aria-selected":u.value==="filters",role:"tab",type:"button",class:_(["tab",{active:u.value==="filters"}]),style:{position:"relative"},onClick:e[0]||(e[0]=i=>u.value="filters")},[t("span",De,c(ne.value),1),e[4]||(e[4]=t("i",{class:"la la-filter z-10"},null,-1))],10,ke),t("span",{id:"tab-print","aria-selected":u.value==="print",role:"tab",type:"button",class:_(["tab",{active:u.value==="print"}]),onClick:e[1]||(e[1]=i=>u.value="print")},e[5]||(e[5]=[t("i",{class:"la la-print"},null,-1)]),10,Ce),t("span",{id:"tab-lista","aria-selected":u.value==="lista",role:"tab",type:"button",class:_(["tab",{active:u.value==="lista"}]),onClick:e[2]||(e[2]=i=>u.value="lista")}," Lista ",10,Te)])]),t("div",null,[t("div",Ee,[S(t("div",Se,[t("div",$e,[e[6]||(e[6]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),(h=r(l).filters)!=null&&h.calendars?(a(),o("div",Le,[t("b",null,c((((k=r(l).filters)==null?void 0:k.calendars)||[]).map(i=>j(i)).join(", ")),1)])):v("",!0),(C=r(l).filters)!=null&&C.locale?(a(),o("span",Ve,[t("b",null,c(j((T=r(l).filters)==null?void 0:T.locale)),1)])):v("",!0),(I=r(l).filters)!=null&&I.date?(a(),o("span",je," Data: "+c((z=(N=(F=(O=r(l).filters.date)==null?void 0:O.split("T")[0])==null?void 0:F.split("-"))==null?void 0:N.reverse())==null?void 0:z.join("/")),1)):v("",!0),!r(l).filters.date&&((M=r(l).filters)!=null&&M.start||(P=r(l).filters)!=null&&P.end)?(a(),o("div",Be," Período: "+c((Q=(K=(W=(H=(q=r(l).filters)==null?void 0:q.start)==null?void 0:H.split("T")[0])==null?void 0:W.split("-"))==null?void 0:K.reverse())==null?void 0:Q.join("/"))+" à "+c((Y=(X=(J=(U=(R=r(l).filters)==null?void 0:R.end)==null?void 0:U.split("T")[0])==null?void 0:J.split("-"))==null?void 0:X.reverse())==null?void 0:Y.join("/")),1)):v("",!0),r(l).filters.search?(a(),o("div",Ge,c(r(l).filters.search),1)):v("",!0)])],512),[[$,u.value==="lista"]]),S(t("div",we,[pe(_e)],512),[[$,u.value==="filters"]]),S(t("div",xe,[t("div",{class:"text-center"},[e[8]||(e[8]=t("p",{class:"mb-4"},"Ajustes de impressão:",-1)),t("button",{class:"success",onClick:ae},e[7]||(e[7]=[t("i",{class:"la la-print"},null,-1),L(" Imprimir ")]))]),t("div",Ae,[t("div",Ie,[e[9]||(e[9]=t("b",null,"Lista",-1)),t("div",null,[t("i",{class:_(["la",A.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:e[3]||(e[3]=i=>oe(!A.value))},null,2)])]),(a(!0),o(E,null,V(d.value,(i,p)=>(a(),o("div",{key:i.title,class:_(["settings-list",{"drag-over":m.value===p}]),draggable:"true",onDragstart:n=>B(p),onDragover:se(n=>G(p),["prevent"]),onDrop:n=>w(p)},[L(c(i.title)+" ",1),t("i",{class:_(["la",f[i.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:n=>x(i.title)},null,10,Fe)],42,Oe))),128))])],512),[[$,u.value==="print"]])])]),d.value?(a(),o("div",Ne,[(a(!0),o(E,null,V(d.value,(i,p)=>S((a(),o("div",{key:i.title,class:_(["table-list",{"drag-over":m.value===p}]),draggable:"true",style:{cursor:"move"},onDragstart:n=>B(p),onDragover:se(n=>G(p),["prevent"]),onDrop:n=>w(p)},[t("table",null,[t("thead",null,[t("tr",null,[t("th",Me,[t("div",Pe,[L(c(i.title)+" ",1),t("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:n=>x(i.title)},null,8,qe)])])])]),t("tbody",null,[(a(!0),o(E,null,V(i.items,n=>(a(),o("tr",{key:n.id},[t("td",null,[n.formatDate?(a(),o("span",He,c(n.formatDate),1)):v("",!0)]),t("td",null,[n.formatWeek?(a(),o("span",We,c(n.formatWeek),1)):v("",!0)]),t("td",null,[n.formatTime?(a(),o("span",Ke,c(n.formatTime),1)):v("",!0)]),t("td",null,c(n.locale),1),t("td",null,[n.desc?(a(),o("span",{key:0,innerHTML:r(fe)(n.desc)},null,8,Qe)):v("",!0)])]))),128))])])],42,ze)),[[$,f[i.title]]])),128)),y.value?(a(),te(r(me),{key:0,editor:y.value,class:"editable"},null,8,["editor"])):v("",!0)])):v("",!0)],64))])}}},st=re(Re,[["__scopeId","data-v-3cf27eec"]]);export{st as default};

import{L as pe}from"./DpGbaO0b.js";import{_ as fe,s as me,r as h,x as te,f as le,D as ne,z as be,Q as ge,c as i,C as se,p as r,F as E,a as t,g as p,n as b,t as c,h as y,A as w,b as ae,w as _e,e as z,v as oe,j as $,M as he,B as ye,o as a,l as ie,P as Se}from"./BbWWPUek.js";import{F as ke}from"./DkfbrLYj.js";import{a as De,S as ze,E as Ce}from"./AcBAIysn.js";const Te={class:"tabs-container print-hide"},xe={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Ee=["aria-selected"],we={class:"badge"},$e=["aria-selected"],Le=["aria-selected"],Ve={class:"tab-content"},Me={id:"tab-content-lista",role:"tabpanel"},Be={class:"text-center"},je={key:0},Fe={key:1},Ie={key:2},Ge={key:3},Ae={key:4},Oe={id:"tab-content-filters",role:"tabpanel"},Ne={id:"tab-content-print",role:"tabpanel"},Pe={class:"text-center flex col items-center gap-4"},qe={class:"p form-group flex items-center aling-center"},He={class:"a4 print-hide"},We={class:"settings-list print-hide"},Ue=["onDragstart","onDragover","onDrop"],Ke=["onClick"],Qe=["onDragstart","onDragover","onDrop"],Re={colspan:"5"},Je={class:"flex items-center aling-center justify-center"},Xe=["onClick"],Ye={key:0},Ze={key:0},et={key:0},tt=["innerHTML"],lt={__name:"index",setup(nt){const{lista:n}=me(),u=h("lista"),v=h({fontSize:15});te(()=>{window.innerWidth>720?v.value.fontSize=15:v.value.fontSize=Math.max(10,Math.min(15,Math.round(window.innerWidth/80*10)/10))});function re(){v.value.fontSize<10&&(v.value.fontSize=10),v.value.fontSize>20&&(v.value.fontSize=20),v.value.fontSize=Math.round(v.value.fontSize*10)/10}const L=l=>{var e;return(e=l==null?void 0:l.replace(/-$/,""))==null?void 0:e.trim()},ue=l=>{if(!l)return 0;let e=0;return l.search&&e++,l.title&&e++,l.locale&&e++,l.date&&e++,l.calendars&&l.calendars.length>0&&e++,e},de=()=>{u.value="lista",setTimeout(()=>{window.print(),u.value="print"},1e3)},ve=le(()=>ue(n.filters)),d=h([]);ne(()=>n.groupedEventsByTitle,()=>{var l,e,_,C,D;if(((e=(l=n.filters)==null?void 0:l.calendars)==null?void 0:e.length)>0||(_=n.filters)!=null&&_.locale||(C=n.filters)!=null&&C.date||(D=n.filters)!=null&&D.search){if(!n.groupedEventsByTitle){d.value=[];return}d.value=Object.entries(n.groupedEventsByTitle).map(([T,x])=>({title:T,items:x}))}else return d.value=[]},{immediate:!0,deep:!0});const g=h(null),S=h(null),V=l=>{g.value=l},M=l=>{S.value=l},B=l=>{if(g.value===null||g.value===l){g.value=null,S.value=null;return}const e=d.value.slice(),[_]=e.splice(g.value,1);e.splice(l,0,_),d.value=e,g.value=null,S.value=null},m=be({});ne(d,()=>{d.value&&d.value.forEach(l=>{l.title in m||(m[l.title]=!0)})},{immediate:!0});const j=l=>{u.value="print",m[l]=!m[l]},F=le(()=>d.value.length>0&&d.value.every(l=>m[l.title])),ce=l=>{d.value.forEach(e=>{m[e.title]=l})},k=h(null);return te(()=>{k.value=new De({extensions:[ze],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),ge(()=>{k.value&&k.value.destroy()}),(l,e)=>{var D,T,x,I,G,A,O,N,P,q,H,W,U,K,Q,R,J,X,Y,Z,ee;const _=pe,C=ye("H3");return a(),i("div",null,[r(n).loading?(a(),se(_,{key:0})):(a(),i(E,{key:1},[t("div",Te,[t("nav",xe,[t("span",{id:"tab-filters","aria-selected":u.value==="filters",role:"tab",type:"button",class:b(["tab",{active:u.value==="filters"}]),style:{position:"relative"},onClick:e[0]||(e[0]=s=>u.value="filters")},[t("span",we,c(ve.value),1),e[6]||(e[6]=t("i",{class:"la la-filter z-10"},null,-1))],10,Ee),t("span",{id:"tab-print","aria-selected":u.value==="print",role:"tab",type:"button",class:b(["tab",{active:u.value==="print"}]),onClick:e[1]||(e[1]=s=>u.value="print")},e[7]||(e[7]=[t("i",{class:"la la-print"},null,-1)]),10,$e),t("span",{id:"tab-lista","aria-selected":u.value==="lista",role:"tab",type:"button",class:b(["tab",{active:u.value==="lista"}]),onClick:e[2]||(e[2]=s=>u.value="lista")}," Lista ",10,Le)])]),t("div",null,[t("div",Ve,[y(t("div",Me,[t("div",Be,[e[8]||(e[8]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),(D=r(n).filters)!=null&&D.calendars?(a(),i("div",je,[t("b",null,c((((T=r(n).filters)==null?void 0:T.calendars)||[]).map(s=>L(s)).join(", ")),1)])):p("",!0),(x=r(n).filters)!=null&&x.locale?(a(),i("span",Fe,[t("b",null,c(L((I=r(n).filters)==null?void 0:I.locale)),1)])):p("",!0),(G=r(n).filters)!=null&&G.date?(a(),i("span",Ie," Data: "+c((P=(N=(O=(A=r(n).filters.date)==null?void 0:A.split("T")[0])==null?void 0:O.split("-"))==null?void 0:N.reverse())==null?void 0:P.join("/")),1)):p("",!0),!r(n).filters.date&&((q=r(n).filters)!=null&&q.start||(H=r(n).filters)!=null&&H.end)?(a(),i("div",Ge," Período: "+c((R=(Q=(K=(U=(W=r(n).filters)==null?void 0:W.start)==null?void 0:U.split("T")[0])==null?void 0:K.split("-"))==null?void 0:Q.reverse())==null?void 0:R.join("/"))+" à "+c((ee=(Z=(Y=(X=(J=r(n).filters)==null?void 0:J.end)==null?void 0:X.split("T")[0])==null?void 0:Y.split("-"))==null?void 0:Z.reverse())==null?void 0:ee.join("/")),1)):p("",!0),r(n).filters.search?(a(),i("div",Ae,c(r(n).filters.search),1)):p("",!0)])],512),[[w,u.value==="lista"]]),y(t("div",Oe,[ae(ke)],512),[[w,u.value==="filters"]]),y(t("div",Ne,[t("div",Pe,[ae(C,{class:"mb-4 p"},{default:_e(()=>e[9]||(e[9]=[z("Ajustes de impressão:")])),_:1,__:[9]}),t("div",qe,[e[10]||(e[10]=t("label",null,"Fonte",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value.fontSize=s),type:"range",min:"10",max:"20",step:"0.1",placeholder:"Font Size"},null,512),[[oe,v.value.fontSize,void 0,{number:!0}]]),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>v.value.fontSize=s),type:"number",min:"10",max:"20",step:"0.1",style:{width:"70px","margin-left":"8px"},onInput:re},null,544),[[oe,v.value.fontSize,void 0,{number:!0}]]),e[11]||(e[11]=z(" px "))]),t("div",{class:"p"},[t("button",{class:"success",onClick:de},e[12]||(e[12]=[t("i",{class:"la la-print"},null,-1),z(" Imprimir ")]))])]),t("div",He,[t("div",We,[e[13]||(e[13]=t("b",null,"Lista",-1)),t("div",null,[t("i",{class:b(["la",F.value?"la-toggle-on":"la-toggle-off"]),title:"Ocultar todos",onClick:e[5]||(e[5]=s=>ce(!F.value))},null,2)])]),(a(!0),i(E,null,$(d.value,(s,f)=>(a(),i("div",{key:s.title,class:b(["settings-list print-hide",{"drag-over":S.value===f}]),draggable:"true",onDragstart:o=>V(f),onDragover:ie(o=>M(f),["prevent"]),onDrop:o=>B(f)},[z(c(s.title)+" ",1),t("i",{class:b(["la",m[s.title]?"la-toggle-on":"la-toggle-off"]),title:"Alterar visibilidade",onClick:o=>j(s.title)},null,10,Ke)],42,Ue))),128))])],512),[[w,u.value==="print"]])])]),d.value?(a(),i("div",{key:0,class:"print-page",style:he({fontSize:v.value.fontSize+"px"})},[(a(!0),i(E,null,$(d.value,(s,f)=>y((a(),i("div",{key:s.title,class:b(["table-list",{"drag-over":S.value===f}]),draggable:"true",style:{cursor:"move"},onDragstart:o=>V(f),onDragover:ie(o=>M(f),["prevent"]),onDrop:o=>B(f)},[t("table",null,[t("thead",null,[t("tr",null,[t("th",Re,[t("div",Je,[z(c(s.title)+" ",1),t("i",{class:"la la-toggle-on print-hide",style:{cursor:"pointer"},onClick:o=>j(s.title)},null,8,Xe)])])])]),t("tbody",null,[(a(!0),i(E,null,$(s.items,o=>(a(),i("tr",{key:o.id},[t("td",null,[o.formatDate?(a(),i("span",Ye,c(o.formatDate),1)):p("",!0)]),t("td",null,[o.formatWeek?(a(),i("span",Ze,c(o.formatWeek),1)):p("",!0)]),t("td",null,[o.formatTime?(a(),i("span",et,c(o.formatTime),1)):p("",!0)]),t("td",null,c(o.locale),1),t("td",null,[o.desc?(a(),i("span",{key:0,innerHTML:r(Se)(o.desc)},null,8,tt)):p("",!0)])]))),128))])])],42,Qe)),[[w,m[s.title]]])),128)),k.value?(a(),se(r(Ce),{key:0,editor:k.value,class:"editable"},null,8,["editor"])):p("",!0)],4)):p("",!0)],64))])}}},dt=fe(lt,[["__scopeId","data-v-bd7aff02"]]);export{dt as default};

import q from"./D9ulxedu.js";import{_ as w,C as R,k as j,s as E,r as x,L as k,W as _,D as M,c as r,o as i,a as t,h as d,g as v,v as c,E as N,F,j as V,t as m,p as u,M as T,b as A,e as C}from"./WFx7aDd1.js";const I={class:"content"},O={class:"form-inline"},S={class:"form-group"},W={class:"row"},h={class:"form-group"},z={class:"row"},P={class:"form-group"},G={class:"row"},H=["value"],J={class:"form-group"},K={class:"flex gap-xs"},Q={class:"form-group"},X={class:"flex gap-xs"},Y={class:"form-group",style:{"align-items":"flex-start"}},Z=["id","value"],ee=["for"],te={class:"form-group",style:{"text-align":"right"}},le=["disabled"],ae={class:"form-inline",style:{gap:"1rem","margin-top":"1rem"}},se={__name:"filters-lista",setup(oe){const L=R(),D=j(),{lista:n}=E(),b=x(!1),l=x({search:"",title:"",locale:"",date:"",start:n.filters.start,end:n.filters.end,calendars:[]}),U=()=>{const o=L.query||{};["search","title","locale","date","start","end"].forEach(s=>{o[s]!==void 0&&(l.value[s]=o[s])}),o.calendars&&(l.value.calendars=Array.isArray(o.calendars)?o.calendars:o.calendars.split(",").filter(Boolean))},B=k(()=>{const o=Object.fromEntries(Object.entries(l.value).filter(([e,s])=>e==="calendars"?s.length:s!==""&&s!=null).map(([e,s])=>Array.isArray(s)?[e,s.join(",")]:[e,s]));D.replace({query:o})},200),f=k(()=>{B();const{today:o,future:e}=_();n.filters={...n.filters,...l.value,start:l.value.start||o,end:l.value.end||e},n.updateFetchFilters()},1e3);M(l,()=>{f()},{deep:!0});function p(o){if(o==="calendars")l.value.calendars=[];else if(o==="date"){l.value.date="";const{today:e,future:s}=_();l.value.start=e,l.value.end=s}else l.value[o]=""}return U(),f(),(o,e)=>{var y,g;const s=q;return i(),r("div",I,[t("div",O,[t("div",null,[t("div",S,[e[13]||(e[13]=t("label",{for:"search"},"Pesquisar",-1)),t("div",W,[d(t("input",{id:"search","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.search=a),type:"text",placeholder:"Buscar itens..."},null,512),[[c,l.value.search]]),l.value.search?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar pesquisa",type:"button",onClick:e[1]||(e[1]=a=>p("search"))}," × ")):v("",!0)])]),t("div",h,[e[14]||(e[14]=t("label",{for:"title"},"Título",-1)),t("div",z,[d(t("input",{id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.title=a),type:"text",placeholder:"Filtrar por título..."},null,512),[[c,l.value.title]]),l.value.title?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar título",type:"button",onClick:e[3]||(e[3]=a=>p("title"))}," × ")):v("",!0)])]),t("div",P,[e[16]||(e[16]=t("label",{for:"locale"},"Local",-1)),t("div",G,[d(t("select",{id:"locale","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.locale=a)},[e[15]||(e[15]=t("option",{value:""},"Todos os locais",-1)),(i(!0),r(F,null,V(u(n).eventsLocales,a=>(i(),r("option",{key:a,value:a},m(a),9,H))),128))],512),[[N,l.value.locale]]),l.value.locale?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar local",type:"button",onClick:e[5]||(e[5]=a=>p("locale"))}," × ")):v("",!0)])]),t("div",J,[e[17]||(e[17]=t("label",{for:"date"},"Data",-1)),t("div",K,[d(t("input",{id:"date","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.date=a),type:"date"},null,512),[[c,l.value.date]]),l.value.date?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar data",type:"button",onClick:e[7]||(e[7]=a=>p("date"))}," × ")):v("",!0)])]),t("div",Q,[e[18]||(e[18]=t("label",null,"Intervalo de Datas",-1)),t("div",X,[d(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.start=a),type:"date"},null,512),[[c,l.value.start]]),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.end=a),type:"date"},null,512),[[c,l.value.end]])]),l.value.start||l.value.end?(i(),r("button",{key:0,class:"btn-clear","aria-label":"Limpar datas",type:"button",onClick:e[10]||(e[10]=a=>p("date"))}," × ")):v("",!0)])]),t("div",null,[t("div",Y,[e[19]||(e[19]=t("label",null,"Agendas",-1)),t("div",null,[(i(!0),r(F,null,V(u(n).eventsCalendars,a=>(i(),r("div",{key:a},[d(t("input",{id:"cat-"+a,"onUpdate:modelValue":e[11]||(e[11]=$=>l.value.calendars=$),type:"checkbox",value:a,style:{margin:"5px 5px 0 0"}},null,8,Z),[[T,l.value.calendars]]),t("label",{for:"cat-"+a,style:{"margin-bottom":"0"}},m(a),9,ee)]))),128))])]),t("div",te,[e[20]||(e[20]=t("label",null,null,-1)),t("button",{class:"success",disabled:b.value||u(n).loading,onClick:e[12]||(e[12]=a=>u(f)())},m(b.value||u(n).loading?"Atualizando...":"Aplicar"),9,le)])])]),t("div",ae,[t("span",null,[A(s,{name:"la:calendar-check"}),C(" "+m(((g=(y=u(n))==null?void 0:y.calendars)==null?void 0:g.length)||0),1)]),t("span",null,[A(s,{name:"la:tasks"}),C(" "+m(Array.isArray(u(n).eventsFiltered)?u(n).eventsFiltered.length:0),1)])])])}}},ie=w(se,[["__scopeId","data-v-1c599421"]]);export{ie as F};

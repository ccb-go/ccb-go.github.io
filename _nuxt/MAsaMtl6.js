import{L as ce}from"./CjARZj7G.js";import{_ as ue,s as de,r as C,f as se,D as le,B as ve,x as pe,R as fe,c as r,I as m,p as l,F as S,a as t,g as v,n as x,b as T,t as d,h as L,G as B,e as j,j as G,o as n,l as ne,Q as _e}from"./DQrZHPvU.js";import{F as ge}from"./CvBSWSdV.js";import{a as be,S as me,E as ye}from"./D922Rzh8.js";import _ from"./COLhDR42.js";const ke={class:"tabs-container print-hide"},he={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},De=["aria-selected"],Ce={class:"badge"},xe=["aria-selected"],Te=["aria-selected"],Ee={class:"tab-content"},$e={id:"tab-content-lista",role:"tabpanel"},Se={class:"text-center"},Le={key:0},Be={key:1},Ve={key:2},je={key:3},Ge={key:4},ze={id:"tab-content-filters",role:"tabpanel"},Ie={id:"tab-content-print",role:"tabpanel"},we={class:"text-center"},Oe={style:{"margin-top":"10px"},class:"a4"},Fe={class:"settings-list"},Me=["onDragstart","onDragover","onDrop"],Ne={key:0,class:"print-page"},Ae=["onDragstart","onDragover","onDrop"],qe={colspan:"5"},Pe={class:"flex items-center aling-center justify-center",style:{gap:"10px","text-align":"center"}},He={key:0},Re={key:0},We={key:0},Ke=["innerHTML"],Qe={__name:"index",setup(Ue){const{lista:a}=de(),c=C("lista"),z=s=>{var e;return(e=s==null?void 0:s.replace(/-$/,""))==null?void 0:e.trim()},ae=s=>{if(!s)return 0;let e=0;return s.search&&e++,s.title&&e++,s.locale&&e++,s.date&&e++,s.calendars&&s.calendars.length>0&&e++,e},oe=()=>{c.value="lista",setTimeout(()=>{window.print(),c.value="print"},500)},ie=se(()=>ae(a.filters)),u=C([]);le(()=>a.groupedEventsByTitle,()=>{var s,e,b,h,D;if(((e=(s=a.filters)==null?void 0:s.calendars)==null?void 0:e.length)>0||(b=a.filters)!=null&&b.locale||(h=a.filters)!=null&&h.date||(D=a.filters)!=null&&D.search){if(!a.groupedEventsByTitle){u.value=[];return}u.value=Object.entries(a.groupedEventsByTitle).map(([E,$])=>({title:E,items:$}))}else return u.value=[]},{immediate:!0,deep:!0});const g=C(null),y=C(null),I=s=>{g.value=s},w=s=>{y.value=s},O=s=>{if(g.value===null||g.value===s){g.value=null,y.value=null;return}const e=u.value.slice(),[b]=e.splice(g.value,1);e.splice(s,0,b),u.value=e,g.value=null,y.value=null},f=ve({});le(u,()=>{u.value&&u.value.forEach(s=>{s.title in f||(f[s.title]=!0)})},{immediate:!0});const V=s=>{c.value="print",f[s]=!f[s]},re=se(()=>u.value.length>0&&u.value.every(s=>f[s.title])),F=s=>{u.value.forEach(e=>{f[e.title]=s})},k=C(null);return pe(()=>{k.value=new be({extensions:[me],content:`
      <p>Oração Santa Ceia</p>
      <p><strong>Pão:</strong> "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo."</p>
      <p><strong>Cálice:</strong> "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo."</p>
    `,editable:!0})}),fe(()=>{k.value&&k.value.destroy()}),(s,e)=>{var h,D,E,$,M,N,A,q,P,H,R,W,K,Q,U,J,X,Y,Z,ee,te;const b=ce;return n(),r("div",null,[l(a).loading?(n(),m(b,{key:0})):(n(),r(S,{key:1},[t("div",ke,[t("nav",he,[t("span",{id:"tab-filters","aria-selected":c.value==="filters",role:"tab",type:"button",class:x(["tab",{active:c.value==="filters"}]),style:{position:"relative"},onClick:e[0]||(e[0]=i=>c.value="filters")},[t("span",Ce,d(ie.value),1),T(l(_),{name:"la:filter",class:"icon z-10"})],10,De),t("span",{id:"tab-print","aria-selected":c.value==="print",role:"tab",type:"button",class:x(["tab",{active:c.value==="print"}]),onClick:e[1]||(e[1]=i=>c.value="print")},[T(l(_),{name:"la:print",class:"icon"})],10,xe),t("span",{id:"tab-lista","aria-selected":c.value==="lista",role:"tab",type:"button",class:x(["tab",{active:c.value==="lista"}]),onClick:e[2]||(e[2]=i=>c.value="lista")}," Lista ",10,Te)])]),t("div",null,[t("div",Ee,[L(t("div",$e,[t("div",Se,[e[5]||(e[5]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),(h=l(a).filters)!=null&&h.calendars?(n(),r("div",Le,[t("b",null,d((((D=l(a).filters)==null?void 0:D.calendars)||[]).map(i=>z(i)).join(", ")),1)])):v("",!0),(E=l(a).filters)!=null&&E.locale?(n(),r("span",Be,[t("b",null,d(z(($=l(a).filters)==null?void 0:$.locale)),1)])):v("",!0),(M=l(a).filters)!=null&&M.date?(n(),r("span",Ve," Data: "+d((P=(q=(A=(N=l(a).filters.date)==null?void 0:N.split("T")[0])==null?void 0:A.split("-"))==null?void 0:q.reverse())==null?void 0:P.join("/")),1)):v("",!0),!l(a).filters.date&&((H=l(a).filters)!=null&&H.start||(R=l(a).filters)!=null&&R.end)?(n(),r("div",je," Período: "+d((J=(U=(Q=(K=(W=l(a).filters)==null?void 0:W.start)==null?void 0:K.split("T")[0])==null?void 0:Q.split("-"))==null?void 0:U.reverse())==null?void 0:J.join("/"))+" à "+d((te=(ee=(Z=(Y=(X=l(a).filters)==null?void 0:X.end)==null?void 0:Y.split("T")[0])==null?void 0:Z.split("-"))==null?void 0:ee.reverse())==null?void 0:te.join("/")),1)):v("",!0),l(a).filters.search?(n(),r("div",Ge,d(l(a).filters.search),1)):v("",!0)])],512),[[B,c.value==="lista"]]),L(t("div",ze,[T(ge)],512),[[B,c.value==="filters"]]),L(t("div",Ie,[t("div",we,[e[7]||(e[7]=t("p",{class:"mb-4"},"Ajustes de impressão:",-1)),t("button",{class:"success",onClick:oe},[T(l(_),{name:"la:print",class:"icon"}),e[6]||(e[6]=j(" Imprimir "))])]),t("div",Oe,[t("div",Fe,[e[8]||(e[8]=t("b",null,"Lista",-1)),t("div",null,[re.value?(n(),m(l(_),{key:0,name:"la:toggle-on",class:"icon",style:{cursor:"pointer","font-size":"18px",padding:"8px",color:"#22c55e"},title:"Ocultar todos",onClick:e[3]||(e[3]=i=>F(!1))})):(n(),m(l(_),{key:1,name:"la:toggle-off",title:"Mostrar todos",style:{cursor:"pointer","font-size":"18px",padding:"8px",color:"#dc2626"},class:"icon",onClick:e[4]||(e[4]=i=>F(!0))}))])]),(n(!0),r(S,null,G(u.value,(i,p)=>(n(),r("div",{key:i.title,class:x(["settings-list",{"drag-over":y.value===p}]),draggable:"true",onDragstart:o=>I(p),onDragover:ne(o=>w(p),["prevent"]),onDrop:o=>O(p)},[j(d(i.title)+" ",1),f[i.title]?(n(),m(l(_),{key:1,name:"la:toggle-on",class:"icon",style:{cursor:"pointer","font-size":"14px",padding:"8px",color:"#22c55e"},onClick:o=>V(i.title)},null,8,["onClick"])):(n(),m(l(_),{key:0,name:"la:toggle-off",class:"icon",onClick:o=>V(i.title)},null,8,["onClick"]))],42,Me))),128))])],512),[[B,c.value==="print"]])])]),u.value?(n(),r("div",Ne,[(n(!0),r(S,null,G(u.value,(i,p)=>L((n(),r("div",{key:i.title,class:x(["table-list",{"drag-over":y.value===p}]),draggable:"true",style:{cursor:"move"},onDragstart:o=>I(p),onDragover:ne(o=>w(p),["prevent"]),onDrop:o=>O(p)},[t("table",null,[t("thead",null,[t("tr",null,[t("th",qe,[t("div",Pe,[j(d(i.title)+" ",1),T(l(_),{name:"la:toggle-on",class:"print-hide icon",style:{cursor:"pointer","font-size":"14px",padding:"8px",color:"#22c55e"},onClick:o=>V(i.title)},null,8,["onClick"])])])])]),t("tbody",null,[(n(!0),r(S,null,G(i.items,o=>(n(),r("tr",{key:o.id},[t("td",null,[o.formatDate?(n(),r("span",He,d(o.formatDate),1)):v("",!0)]),t("td",null,[o.formatWeek?(n(),r("span",Re,d(o.formatWeek),1)):v("",!0)]),t("td",null,[o.formatTime?(n(),r("span",We,d(o.formatTime),1)):v("",!0)]),t("td",null,d(o.locale),1),t("td",null,[o.desc?(n(),r("span",{key:0,innerHTML:l(_e)(o.desc)},null,8,Ke)):v("",!0)])]))),128))])])],42,Ae)),[[B,f[i.title]]])),128)),k.value?(n(),m(l(ye),{key:0,editor:k.value,class:"editable"},null,8,["editor"])):v("",!0)])):v("",!0)],64))])}}},lt=ue(Qe,[["__scopeId","data-v-6462680e"]]);export{lt as default};

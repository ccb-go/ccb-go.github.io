import me from"./COLhDR42.js";import{s as ve,C as ge,B as be,r as S,D as B,c as p,o as u,a as t,h as b,v as R,I as L,g as D,i as C,l as P,_ as fe,t as I,F as Q,j as X,p as J,e as M,f as ye,x as _e,G as z,b as F,H as pe,n as xe}from"./DQrZHPvU.js";import{S as K}from"./DtCtkwd7.js";const we={class:"p-4"},Se={class:"flex flex-col text-sm text-gray-700 w-full"},De={class:"flex flex-col text-sm text-gray-700"},ke={class:"flex flex-col text-sm text-gray-700 w-full"},Ee={class:"flex flex-col text-sm text-gray-700"},Ie={class:"flex flex-col text-sm text-gray-700 col-span-1 sm:col-span-2 lg:col-span-4 w-full"},Le={__name:"ListaCreateEvent",setup(T){var j,V,U,q;const{lista:m}=ve(),i=ge(),k=new Date().setHours(16,0,0,0),c=new Date(k).toISOString().slice(0,16),$=["REGIONAL FAINA","LOCALIDADE","DARPE","PORTEIROS"],A=m.titles,O=m.locales,h=m.desc,a=be({date:((j=i.query)==null?void 0:j.date)||c,list:((V=i.query)==null?void 0:V.list)||"",title:((U=i.query)==null?void 0:U.title)||"",locale:((q=i.query)==null?void 0:q.locale)||"",desc:"",start:"",end:""}),v=S([]),y=S([]),_=S([]),o=S([]);function n(l){return l.trim().toUpperCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}function r(l,e){return n(l).includes(n(e))}function d(l,e,s=4){return e?l.filter(E=>e.split(" ").every(N=>r(E,N))).slice(0,s):l.slice(0,s)}function x(l,e,s,E){E.value=d(s,e,3)}function w(l,e){e&&(a[l]=e),G(l)}function f(l,e){e&&e.length>0&&(a[l]=e[0])}function Y(){}function G(l){setTimeout(()=>{l==="list"&&(v.value=[]),l==="title"&&(y.value=[]),l==="locale"&&(_.value=[]),l==="desc"&&(o.value=[])},100)}function H(){if(a.date&&a.list&&a.title&&a.locale&&a.desc){const l={...a};console.log("Item adicionado:",l),a.date=c,a.desc=""}else alert("Por favor, preencha todos os campos obrigatórios.")}return B(()=>a.list,l=>x("list",l,$,v)),B(()=>a.title,l=>x("title",l,A,y)),B(()=>a.locale,l=>x("locale",l,O,_)),B(()=>a.desc,l=>{if(!l){o.value=[];return}const e=l.trim().split(/\s+/)||[],s=e.slice(-2).join(" "),E=e.slice(-1).join(" "),N=new Set([...d(h,s),...d(h,E)]);o.value=Array.from(N).slice(0,3)}),(l,e)=>(u(),p("div",we,[t("form",{class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",onSubmit:P(H,["prevent"])},[t("div",Se,[e[15]||(e[15]=t("label",{for:"date",class:"font-medium mb-1 text-left"},"Data:",-1)),b(t("input",{id:"date","onUpdate:modelValue":e[0]||(e[0]=s=>a.date=s),type:"datetime-local",class:"w-full border rounded-md px-4 py-2 focus:ring focus:ring-blue-200",required:""},null,512),[[R,a.date]])]),t("div",De,[e[16]||(e[16]=t("label",{for:"list",class:"font-medium mb-1 text-left"},"Lista:",-1)),b(t("input",{id:"list","onUpdate:modelValue":e[1]||(e[1]=s=>a.list=s),type:"text",class:"border rounded-md px-4 py-2 focus:ring focus:ring-blue-200",placeholder:"Digite para buscar...",autocomplete:"off",onKeydown:[e[2]||(e[2]=C(P(s=>f("list",v.value),["prevent"]),["enter"])),e[3]||(e[3]=C(s=>void 0,["tab"]))]},null,544),[[R,a.list]]),v.value.length?(u(),L(K,{key:0,suggestions:v.value,onSelect:e[4]||(e[4]=s=>w("list",s))},null,8,["suggestions"])):D("",!0)]),t("div",ke,[e[17]||(e[17]=t("label",{for:"title",class:"font-medium mb-1 text-left"},"Título:",-1)),b(t("input",{id:"title","onUpdate:modelValue":e[5]||(e[5]=s=>a.title=s),type:"text",class:"w-full border rounded-md px-4 py-2 focus:ring focus:ring-blue-200",placeholder:"Digite para buscar...",autocomplete:"off",onKeydown:[e[6]||(e[6]=C(P(s=>f("title",y.value),["prevent"]),["enter"])),e[7]||(e[7]=C(s=>void 0,["tab"]))]},null,544),[[R,a.title]]),y.value.length?(u(),L(K,{key:0,suggestions:y.value,onSelect:e[8]||(e[8]=s=>w("title",s))},null,8,["suggestions"])):D("",!0)]),t("div",Ee,[e[18]||(e[18]=t("label",{for:"locale",class:"font-medium mb-1 text-left"},"Local:",-1)),b(t("input",{id:"locale","onUpdate:modelValue":e[9]||(e[9]=s=>a.locale=s),type:"text",class:"border rounded-md px-4 py-2 focus:ring focus:ring-blue-200",placeholder:"Digite para buscar...",autocomplete:"off",onKeydown:[e[10]||(e[10]=C(P(s=>f("locale",_.value),["prevent"]),["enter"])),e[11]||(e[11]=C(s=>void 0,["tab"]))]},null,544),[[R,a.locale]]),_.value.length?(u(),L(K,{key:0,suggestions:_.value,onSelect:e[12]||(e[12]=s=>w("locale",s))},null,8,["suggestions"])):D("",!0)]),t("div",Ie,[e[19]||(e[19]=t("label",{for:"desc",class:"font-medium mb-1 text-left"},"Descrição:",-1)),b(t("textarea",{id:"desc","onUpdate:modelValue":e[13]||(e[13]=s=>a.desc=s),class:"w-full border rounded-md px-4 py-2 focus:ring focus:ring-blue-200",rows:"4",required:""},null,512),[[R,a.desc]]),o.value.length?(u(),L(K,{key:0,suggestions:o.value,onSelect:e[14]||(e[14]=s=>w("desc",s))},null,8,["suggestions"])):D("",!0)]),e[20]||(e[20]=t("div",{class:"col-span-1 sm:col-span-2 lg:col-span-4 flex justify-end w-full"},[t("button",{type:"submit",class:"px-6 py-3 bg-green-600 text-white rounded hover:bg-green-700 focus:ring focus:ring-green-300 w-full sm:w-auto"}," Adicionar ")],-1))],32)]))}},Te={class:"text-center text-gray-500"},$e={__name:"ListaNoEventsMessage",setup(T){return(m,i)=>(u(),p("div",Te,i[0]||(i[0]=[t("p",null,[t("strong",null,"Nenhum evento encontrado.")],-1),t("p",null,"Por favor, ajuste os filtros ou tente novamente mais tarde.",-1)])))}},he=fe($e,[["__scopeId","data-v-3b94c18d"]]),Ne={class:"mb-8"},Ce={colspan:"5"},Fe=["onUpdate:modelValue","onInput"],Re=["onFocusout"],Ae={__name:"ListaEventTableEdit",props:{title:{type:String,default:""},items:{type:Array,default:()=>[]}},emits:["edit-event","add-empty-row"],setup(T,{emit:m}){const i=T,k=m,c=S($(i.items));B(()=>i.items,o=>{c.value=$(o)},{deep:!0});function $(o){return o.map(n=>({...n,date:v(n.date)}))}function A(o,n,r){const d=h(o,n);r!==d&&(k("edit-event",o,n,r),O(o)&&k("add-empty-row",i.title))}function O(o){return o.date||o.locale||o.desc}function h(o,n){const r={date:y,time:_};return r[n]?r[n](o.date):o[n]}function a(o,n){const r=new Date(n).toISOString();c.value[o].date=n,k("edit-event",i.items[o],"date",r)}function v(o){return o?new Date(o).toISOString().slice(0,16):""}const y=o=>!o||isNaN(new Date(o).getTime())?"Data inválida":new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(o)),_=o=>new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit"}).format(new Date(o));return(o,n)=>{const r=me;return u(),p("div",Ne,[t("table",null,[t("thead",null,[t("tr",null,[t("th",Ce,I(T.title),1)])]),t("tbody",null,[(u(!0),p(Q,null,X(J(c),(d,x)=>{var w;return u(),p("tr",{key:d.id},[t("td",null,[(w=d==null?void 0:d.recurring)!=null&&w.length?(u(),L(r,{key:0,name:"la:redo-alt",class:"print-hide icon",style:{color:"#9e9e9e"}})):D("",!0)]),t("td",null,[b(t("input",{"onUpdate:modelValue":f=>J(c)[x].date=f,type:"datetime-local",onInput:f=>a(x,f.target.value)},null,40,Fe),[[R,J(c)[x].date]])]),t("td",{contenteditable:"true",onFocusout:f=>A(d,"locale",f.target.innerText.trim())},I(d.locale),41,Re)])}),128))])])])}}},Oe={class:"print-only"},je={__name:"ListaRegionalMessagem",setup(T){return(m,i)=>(u(),p("div",Oe,i[0]||(i[0]=[t("i",null,[M(" Oração Santa Ceia "),t("br"),t("b",null,"Pão:"),M(' "Senhor, abençoa este Pão que vamos comer, que é a comunhão do Corpo de Cristo." '),t("br"),t("b",null,"Cálice:"),M(' "Senhor, abençoa o Cálice que vamos beber, que é a comunhão do Sangue de Cristo." ')],-1)])))}},Ve=fe(je,[["__scopeId","data-v-084ce6bb"]]),Ue={class:"tabs-container print-hide"},qe={class:"tabs justify-end","aria-label":"Tabs",role:"tablist","aria-orientation":"horizontal"},Be=["id","aria-selected","onClick"],Me={class:"tab-content"},Pe={id:"tab-content-lista",role:"tabpanel",class:"transition-opacity duration-300 ease-in-out"},ze={class:"text-center flex flex-col items-center mb-4"},Ke={key:0},Ge={key:1},He={id:"tab-content-filters",role:"tabpanel",class:"transition-opacity duration-300 ease-in-out"},We={id:"tab-content-print",role:"tabpanel",class:"text-center flex flex-col items-center transition-opacity duration-300 ease-in-out"},Je={id:"tab-content-create",role:"tabpanel",class:"text-center flex flex-col items-center transition-opacity duration-300 ease-in-out"},Qe={key:0,class:"flex justify-center items-center h-32 text-center"},Xe={key:1,class:"text-center text-gray-500"},Ye={key:2},Ze={key:0,class:"print-only"},ot={__name:"edit",setup(T){const m=S([]),i=S([]),k=S(!1),c=S("lista"),$=[{id:"tab-create",key:"create",label:"",icon:"la:plus"},{id:"tab-filters",key:"filters",label:"",icon:"la:filter"},{id:"tab-print",key:"print",label:"",icon:"la:print"},{id:"tab-lista",key:"lista",label:"Lista"}];function A(n){i.value=n}function O(n){m.value=n}function h(){c.value="lista",setTimeout(()=>{window.print(),c.value="print"},500)}const a=ye(()=>m.value.reduce((n,{title:r,...d})=>((n[r]||(n[r]=[])).push(d),n),{})),v=n=>{var r;return(r=n==null?void 0:n.replace(/-$/,""))==null?void 0:r.trim()};function y(n){console.log("Novo item adicionado:",n),m.value.push(n)}function _(n,r,d){console.log("Objeto alterado:",{item:n,field:r,newValue:d})}function o(n){a.value[n]&&a.value[n].push({id:Date.now(),date:"",locale:"",desc:""})}return _e(()=>{k.value=!0}),(n,r)=>{var j,V,U,q,l,e,s,E,N,Z,ee,te,ne,oe,se,le,ae,ie,re,ue,de,ce;const d=me,x=pe("ListaFilterBar"),w=Le,f=pe("ListaLoadingSpinner"),Y=he,G=Ae,H=Ve;return u(),p("div",null,[t("div",Ue,[t("nav",qe,[(u(),p(Q,null,X($,g=>t("button",{id:g.id,key:g.id,"aria-selected":c.value===g.key,role:"tab",type:"button",class:xe(["tab",{active:c.value===g.key}]),onClick:W=>c.value=g.key},[g.icon?(u(),L(d,{key:0,name:g.icon,class:"icon"},null,8,["name"])):D("",!0),M(" "+I(g.label),1)],10,Be)),64))])]),t("div",Me,[b(t("div",Pe,[t("div",ze,[r[0]||(r[0]=t("div",null,"LISTA DE ATENDIMENTO E DIVERSOS",-1)),t("b",null,I(v((j=i.value)==null?void 0:j.list)),1),t("b",null,I(v((V=i.value)==null?void 0:V.locale)),1),(U=i.value)!=null&&U.date?(u(),p("p",Ke," Data: "+I((E=(s=(e=(l=(q=i.value)==null?void 0:q.date)==null?void 0:l.split("T")[0])==null?void 0:e.split("-"))==null?void 0:s.reverse())==null?void 0:E.join("/")),1)):D("",!0),!i.value.date&&((N=i.value)!=null&&N.start||(Z=i.value)!=null&&Z.end)?(u(),p("p",Ge," Período: "+I((se=(oe=(ne=(te=(ee=i.value)==null?void 0:ee.start)==null?void 0:te.split("T")[0])==null?void 0:ne.split("-"))==null?void 0:oe.reverse())==null?void 0:se.join("/"))+" à "+I((ue=(re=(ie=(ae=(le=i.value)==null?void 0:le.end)==null?void 0:ae.split("T")[0])==null?void 0:ie.split("-"))==null?void 0:re.reverse())==null?void 0:ue.join("/")),1)):D("",!0)])],512),[[z,c.value==="lista"]]),b(t("div",He,[F(x,{"onUpdate:filters":A,"onUpdate:filteredEventos":O})],512),[[z,c.value==="filters"]]),b(t("div",We,[r[2]||(r[2]=t("p",{class:"mb-4"},"Ajustes de impressão:",-1)),t("button",{class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-center flex items-center",onClick:h},[F(d,{name:"la:print",class:"icon"}),r[1]||(r[1]=M(" Imprimir "))])],512),[[z,c.value==="print"]]),b(t("div",Je,[F(w,{onUpdate:y})],512),[[z,c.value==="create"]])]),k.value?m.value.length===0?(u(),p("div",Xe,[F(Y)])):(u(),p("div",Ye,[(u(!0),p(Q,null,X(a.value,(g,W)=>(u(),L(G,{key:W,title:W,items:g,onEditEvent:_,onAddEmptyRow:o},null,8,["title","items"]))),128)),(ce=(de=i.value)==null?void 0:de.list)!=null&&ce.includes("REGIONAL")?(u(),p("div",Ze,[F(H)])):D("",!0)])):(u(),p("div",Qe,[F(f)]))])}}};export{ot as default};
